var be=Object.defineProperty;var xe=(e,t,n)=>t in e?be(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var oe=(e,t,n)=>xe(e,typeof t!="symbol"?t+"":t,n);import{V as ie}from"./chunks/vcomponent.js";import{c as Ue,a as Ge,d as Xe,g as Ye}from"./chunks/vcomponent.js";import{jsx as k}from"./preact-jsx-runtime.js";import{l as m,_ as he,k as B,B as se,A as R,h as le,T as Se,x as Oe,q as D,y as ee}from"./chunks/icons/Add.js";import{C as Re,I as Ie,i as He}from"./chunks/initializer.js";import{IntlContext as Ce}from"./i18n.js";import{g as tt,s as nt}from"./chunks/image-params-keymap.js";const Ve=e=>{const t=new FormData(e);return Object.fromEntries(t)},ze=e=>{const t=new FormData(e),n=Object.fromEntries(t);return Object.entries(n).reduce((u,[_])=>{const d=e.elements[_];return d!=null&&d.validationMessage?{...u,[_]:d.validationMessage}:{...u}},{})};var je=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i,ge=/^(area|base|br|col|embed|hr|img|input|link|meta|param|source|track|wbr)$/,W=/[\s\n\\/='"\0<>]/,ve=/^xlink:?./,Ne=/["&<]/;function q(e){if(Ne.test(e+="")===!1)return e;for(var t=0,n=0,s="",u="";n<e.length;n++){switch(e.charCodeAt(n)){case 34:u="&quot;";break;case 38:u="&amp;";break;case 60:u="&lt;";break;default:continue}n!==t&&(s+=e.slice(t,n)),s+=u,t=n+1}return n!==t&&(s+=e.slice(t,n)),s}var ae=function(e,t){return String(e).replace(/(\n+)/g,"$1"+(t||"	"))},fe=function(e,t,n){return String(e).length>40||String(e).indexOf(`
`)!==-1||String(e).indexOf("<")!==-1},ue={},De=/([A-Z])/g;function me(e){var t="";for(var n in e){var s=e[n];s!=null&&s!==""&&(t&&(t+=" "),t+=n[0]=="-"?n:ue[n]||(ue[n]=n.replace(De,"-$1").toLowerCase()),t=typeof s=="number"&&je.test(n)===!1?t+": "+s+"px;":t+": "+s+";")}return t||void 0}function te(e,t){return Array.isArray(t)?t.reduce(te,e):t!=null&&t!==!1&&e.push(t),e}function ce(){this.__d=!0}function ye(e,t){return{__v:e,context:t,props:e.props,setState:ce,forceUpdate:ce,__d:!0,__h:[]}}function Z(e,t){var n=e.contextType,s=n&&t[n.__c];return n!=null?s?s.props.value:n.__:t}var I=[];function E(e,t,n,s,u,_){if(e==null||typeof e=="boolean")return"";if(typeof e!="object")return typeof e=="function"?"":q(e);var d=n.pretty,g=d&&typeof d=="string"?d:"	";if(Array.isArray(e)){for(var w="",b=0;b<e.length;b++)d&&b>0&&(w+=`
`),w+=E(e[b],t,n,s,u,_);return w}if(e.constructor!==void 0)return"";var O,h=e.type,a=e.props,x=!1;if(typeof h=="function"){if(x=!0,!n.shallow||!s&&n.renderRootComponent!==!1){if(h===B){var i=[];return te(i,e.props.children),E(i,t,n,n.shallowHighOrder!==!1,u,_)}var o,r=e.__c=ye(e,t);m.__b&&m.__b(e);var v=m.__r;if(h.prototype&&typeof h.prototype.render=="function"){var $=Z(h,t);(r=e.__c=new h(a,$)).__v=e,r._dirty=r.__d=!0,r.props=a,r.state==null&&(r.state={}),r._nextState==null&&r.__s==null&&(r._nextState=r.__s=r.state),r.context=$,h.getDerivedStateFromProps?r.state=Object.assign({},r.state,h.getDerivedStateFromProps(r.props,r.state)):r.componentWillMount&&(r.componentWillMount(),r.state=r._nextState!==r.state?r._nextState:r.__s!==r.state?r.__s:r.state),v&&v(e),o=r.render(r.props,r.state,r.context)}else for(var P=Z(h,t),F=0;r.__d&&F++<25;)r.__d=!1,v&&v(e),o=h.call(e.__c,a,P);return r.getChildContext&&(t=Object.assign({},t,r.getChildContext())),m.diffed&&m.diffed(e),E(o,t,n,n.shallowHighOrder!==!1,u,_)}h=(O=h).displayName||O!==Function&&O.name||function(X){var Y=(Function.prototype.toString.call(X).match(/^\s*function\s+([^( ]+)/)||"")[1];if(!Y){for(var z=-1,Q=I.length;Q--;)if(I[Q]===X){z=Q;break}z<0&&(z=I.push(X)-1),Y="UnnamedComponent"+z}return Y}(O)}var C,S,p="<"+h;if(a){var y=Object.keys(a);n&&n.sortAttributes===!0&&y.sort();for(var A=0;A<y.length;A++){var l=y[A],c=a[l];if(l!=="children"){if(!W.test(l)&&(n&&n.allAttributes||l!=="key"&&l!=="ref"&&l!=="__self"&&l!=="__source")){if(l==="defaultValue")l="value";else if(l==="defaultChecked")l="checked";else if(l==="defaultSelected")l="selected";else if(l==="className"){if(a.class!==void 0)continue;l="class"}else u&&ve.test(l)&&(l=l.toLowerCase().replace(/^xlink:?/,"xlink:"));if(l==="htmlFor"){if(a.for)continue;l="for"}l==="style"&&c&&typeof c=="object"&&(c=me(c)),l[0]==="a"&&l[1]==="r"&&typeof c=="boolean"&&(c=String(c));var f=n.attributeHook&&n.attributeHook(l,c,t,n,x);if(f||f==="")p+=f;else if(l==="dangerouslySetInnerHTML")S=c&&c.__html;else if(h==="textarea"&&l==="value")C=c;else if((c||c===0||c==="")&&typeof c!="function"){if(!(c!==!0&&c!==""||(c=l,n&&n.xml))){p=p+" "+l;continue}if(l==="value"){if(h==="select"){_=c;continue}h==="option"&&_==c&&a.selected===void 0&&(p+=" selected")}p=p+" "+l+'="'+q(c)+'"'}}}else C=c}}if(d){var j=p.replace(/\n\s*/," ");j===p||~j.indexOf(`
`)?d&&~p.indexOf(`
`)&&(p+=`
`):p=j}if(p+=">",W.test(h))throw new Error(h+" is not a valid HTML tag name in "+p);var L,we=ge.test(h)||n.voidElements&&n.voidElements.test(h),N=[];if(S)d&&fe(S)&&(S=`
`+g+ae(S,g)),p+=S;else if(C!=null&&te(L=[],C).length){for(var J=d&&~p.indexOf(`
`),ne=!1,K=0;K<L.length;K++){var U=L[K];if(U!=null&&U!==!1){var M=E(U,t,n,!0,h==="svg"||h!=="foreignObject"&&u,_);if(d&&!J&&fe(M)&&(J=!0),M)if(d){var re=M.length>0&&M[0]!="<";ne&&re?N[N.length-1]+=M:N.push(M),ne=re}else N.push(M)}}if(d&&J)for(var G=N.length;G--;)N[G]=`
`+g+ae(N[G],g)}if(N.length||S)p+=N.join("");else if(n&&n.xml)return p.substring(0,p.length-1)+" />";return!we||L||S?(d&&~p.indexOf(`
`)&&(p+=`
`),p=p+"</"+h+">"):p=p.replace(/>$/," />"),p}var $e={shallow:!0};V.render=V;var Ae=function(e,t){return V(e,t,$e)},de=[];function V(e,t,n){t=t||{};var s=m.__s;m.__s=!0;var u,_=he(B,null);return _.__k=[e],u=n&&(n.pretty||n.voidElements||n.sortAttributes||n.shallow||n.allAttributes||n.xml||n.attributeHook)?E(e,t,n):T(e,t,!1,void 0,_),m.__c&&m.__c(e,de),m.__s=s,de.length=0,u}function H(e){return e==null||typeof e=="boolean"?null:typeof e=="string"||typeof e=="number"||typeof e=="bigint"?he(null,null,e):e}function Pe(e,t){return e==="className"?"class":e==="htmlFor"?"for":e==="defaultValue"?"value":e==="defaultChecked"?"checked":e==="defaultSelected"?"selected":t&&ve.test(e)?e.toLowerCase().replace(/^xlink:?/,"xlink:"):e}function Me(e,t){return e==="style"&&t!=null&&typeof t=="object"?me(t):e[0]==="a"&&e[1]==="r"&&typeof t=="boolean"?String(t):t}var pe=Array.isArray,_e=Object.assign;function T(e,t,n,s,u){if(e==null||e===!0||e===!1||e==="")return"";if(typeof e!="object")return typeof e=="function"?"":q(e);if(pe(e)){var _="";u.__k=e;for(var d=0;d<e.length;d++)_+=T(e[d],t,n,s,u),e[d]=H(e[d]);return _}if(e.constructor!==void 0)return"";e.__=u,m.__b&&m.__b(e);var g=e.type,w=e.props;if(typeof g=="function"){var b;if(g===B)b=w.children;else{b=g.prototype&&typeof g.prototype.render=="function"?function(y,A){var l=y.type,c=Z(l,A),f=new l(y.props,c);y.__c=f,f.__v=y,f.__d=!0,f.props=y.props,f.state==null&&(f.state={}),f.__s==null&&(f.__s=f.state),f.context=c,l.getDerivedStateFromProps?f.state=_e({},f.state,l.getDerivedStateFromProps(f.props,f.state)):f.componentWillMount&&(f.componentWillMount(),f.state=f.__s!==f.state?f.__s:f.state);var j=m.__r;return j&&j(y),f.render(f.props,f.state,f.context)}(e,t):function(y,A){var l,c=ye(y,A),f=Z(y.type,A);y.__c=c;for(var j=m.__r,L=0;c.__d&&L++<25;)c.__d=!1,j&&j(y),l=y.type.call(c,y.props,f);return l}(e,t);var O=e.__c;O.getChildContext&&(t=_e({},t,O.getChildContext()))}var h=T(b=b!=null&&b.type===B&&b.key==null?b.props.children:b,t,n,s,e);return m.diffed&&m.diffed(e),e.__=void 0,m.unmount&&m.unmount(e),h}var a,x,i="<";if(i+=g,w)for(var o in a=w.children,w){var r=w[o];if(!(o==="key"||o==="ref"||o==="__self"||o==="__source"||o==="children"||o==="className"&&"class"in w||o==="htmlFor"&&"for"in w||W.test(o))){if(r=Me(o=Pe(o,n),r),o==="dangerouslySetInnerHTML")x=r&&r.__html;else if(g==="textarea"&&o==="value")a=r;else if((r||r===0||r==="")&&typeof r!="function"){if(r===!0||r===""){r=o,i=i+" "+o;continue}if(o==="value"){if(g==="select"){s=r;continue}g!=="option"||s!=r||"selected"in w||(i+=" selected")}i=i+" "+o+'="'+q(r)+'"'}}}var v=i;if(i+=">",W.test(g))throw new Error(g+" is not a valid HTML tag name in "+i);var $="",P=!1;if(x)$+=x,P=!0;else if(typeof a=="string")$+=q(a),P=!0;else if(pe(a)){e.__k=a;for(var F=0;F<a.length;F++){var C=a[F];if(a[F]=H(C),C!=null&&C!==!1){var S=T(C,t,g==="svg"||g!=="foreignObject"&&n,s,e);S&&($+=S,P=!0)}}}else if(a!=null&&a!==!1&&a!==!0){e.__k=[H(a)];var p=T(a,t,g==="svg"||g!=="foreignObject"&&n,s,e);p&&($+=p,P=!0)}if(m.diffed&&m.diffed(e),e.__=void 0,m.unmount&&m.unmount(e),P)i+=$;else if(ge.test(g))return v+" />";return i+"</"+g+">"}V.shallowRender=Ae;class Be{constructor(t){oe(this,"_provider");this._provider=t}render(t,n){return async s=>{var _;if(!t)throw new Error("Component is not defined");if(!s)throw new Error("Root element is not defined");const u=await((_=t.getInitialData)==null?void 0:_.call(t,n))??{};se(k(ie,{node:this._provider,...this._provider.props,children:k(t,{...n,initialData:u})}),s)}}unmount(t){if(!t)throw new Error("Root element is not defined");se(null,t)}async toString(t,n,s){var _;if(!t)throw new Error("Component is not defined");const u=await((_=t.getInitialData)==null?void 0:_.call(t,n))??{};return V(k(ie,{node:this._provider,...this._provider.props,children:k(t,{...n,initialData:u})}),{},{...s})}}const We=e=>e.replace("_","-");function Fe(e={},t,n){const s=R(null),u=R(!1),_=R([]),[d,g]=le({children:[n==null?void 0:n({})]}),[w,b]=le({}),O=Se(()=>({get:i=>w[i],set:(i,o)=>{b({...O,[i]:o})}}),[w]),{intl:h}=Oe(Ce);e.dictionary=h.dictionary,e._setProps=g;const a=D(i=>{typeof i=="function"?_.current.push(i):console.warn("Skipped: Invalid _registerMethod",i)},[]);e._registerMethod=a;const x=D(i=>k("div",{"data-slot-html-element":i.tagName.toLowerCase(),ref:o=>{o==null||o.appendChild(i)}}),[]);return e._htmlElementToVNode=x,e.getSlotElement=D(i=>{const o=document.querySelector(`[data-slot-key="${i}"]`);if(o)return{appendChild:r=>{o.appendChild(r)},prependChild:r=>{o.insertBefore(r,o.firstChild)},appendSibling:r=>{const v=o.parentNode;v==null||v.insertBefore(r,o.nextSibling)},prependSibling:r=>{const v=o.parentNode;v==null||v.insertBefore(r,o)}}},[]),e.onChange=D(i=>{_.current.push(i)},[]),e.replaceWith=D(i=>{a(o=>{const r=x(i);o._setProps({children:[r]})})},[x,a]),e.appendChild=D(i=>{a(o=>{const r=x(i);o._setProps(v=>({...v,children:[...v.children,r]}))})},[x,a]),e.prependChild=D(i=>{a(o=>{const r=x(i);o._setProps(v=>({...v,children:[r,...v.children]}))})},[x,a]),e.appendSibling=D(i=>{a(()=>{var r,v;const o=(r=s.current)==null?void 0:r.parentNode;o==null||o.insertBefore(i,((v=s.current)==null?void 0:v.nextSibling)??null)})},[a]),e.prependSibling=D(i=>{a(()=>{var r;const o=(r=s.current)==null?void 0:r.parentNode;o==null||o.insertBefore(i,s.current)})},[a]),ee(()=>{const i=s.current;if(!(!t||!i))try{t(e,i)}catch(o){console.error(`Error in "${t.name}" Slot callback`,o)}},[]),ee(()=>{g({children:[n==null?void 0:n(d)]}),_.current.forEach(i=>{i(e,O)}),(n==null?void 0:n.name)==="render"&&u.current===!1&&(u.current=!0)},[JSON.stringify(e),JSON.stringify(w),u.current]),[s,d]}function Ze({name:e,slot:t,context:n,children:s,render:u,..._}){const[d,g]=Fe(n,t,u??(()=>s));return ee(()=>{e||console.warn('Slot "name" is required')},[e]),k("div",{..._,ref:d,"data-slot":e,children:g.children})}window.DROPINS=window.DROPINS||{};window.DROPINS.showSlots=async e=>{window.sessionStorage.setItem("dropin-debugger--show-slots",e.toString()),document.body.classList.toggle("dropin-debugger--show-slots",e)};window.DROPINS.showSlots(window.sessionStorage.getItem("dropin-debugger--show-slots")==="true");export{Re as Config,Ie as Initializer,Be as Render,Ze as Slot,ie as VComponent,Ue as classes,Ge as debounce,Xe as deepmerge,Ye as generateSrcset,ze as getFormErrors,Ve as getFormValues,tt as getImageParamsKeyMap,He as initializers,nt as setImageParamsKeyMap,We as toLanguageTag,Fe as useSlot};
